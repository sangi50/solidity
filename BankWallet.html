<!DOCTYPE html>
<html>
	<head>
		<title>Bank</title>
		<style>
			label {
				display:block;
				padding:10px;
			}
			fieldset {
				width:400px;
				text-align:right;
			}
			font {
				font-family: "Times New Roman";
				
			}
			body {
			
				 background-color: coral;
				
			}
			
		</style>
		 <script src="web3.min.js"></script>
	</head>
	<body>
	         <font>
		<fieldset>	
			<label>Deposit amount<input id="amt" type="number"/></label>
			<label><button  onclick="dep()" >Deposit</button></label>
		</fieldset>
		<fieldset>	
			<label>Withdraw amount<input id="wamt" type="number"/></label>
			<label><button  onclick="wi()" >Withdraw</button></label>
		</fieldset>
		<fieldset>	
			<label>Transfer amount<input id="tamt" type="number"/></label>
			<label>Transfer account number<input id="taccno" type="text"/></label>
			<label><button  onclick="Transfer()" >Transfer</button></label>
		</fieldset>
		<fieldset>
    			<label>Enter your account number<input id="accno" type="text" /></label>
			<label><button onclick="bal()">balanceof</button></label>
		</fieldset>
		<fieldset>	
			<label>Transfer amount<input id="ttamt" type="number"/></label>
			<label>From account number<input id="tfrom" type="text"/></label>
			<label>To account number<input id="tto" type="text"/></label>
			<label><button onclick="From()" >TransferFrom</button></label>
		</fieldset>
		<fieldset>	
			<label>Owner account number<input id="aoaccno" type="text"/></label>
			<label>Spender account number<input id="asaccno" type="text"/></label>
			<label><button onclick="allow()" >Allowance</button></label>
		</fieldset>
		<fieldset>	
			<label>Fix limit<input id="fl" type="number"/></label>
			<label>Spender account number<input id="sa" type="text"/></label>
			<label><button onclick="appro()" >Approve</button></label>
		</fieldset>
		
		<pre id="hashresult"></pre>
    Previous Hash : <pre id="prehashresult"></pre>
	</font>
		<script >
			web3.eth.defaultAccount = web3.eth.accounts[0];
			var aa=web3.eth.contract([
	{
		"constant": true,
		"inputs": [
			{
				"name": "_owner",
				"type": "address"
			},
			{
				"name": "_spender",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "owner",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"name": "",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "_spender",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "amt",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "a",
				"type": "uint256"
			}
		],
		"name": "withdraw",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "amt",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_to",
				"type": "address"
			},
			{
				"name": "_value",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_spender",
				"type": "address"
			},
			{
				"name": "_value",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "totalSupply",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_from",
				"type": "address"
			},
			{
				"name": "_to",
				"type": "address"
			},
			{
				"name": "_value",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	}
]);
		              
		var bb= aa.at('0x1f92d51736e1e2c8772f35a5f65461d231a72aea');
		var transferaccountno= document.getElementById('taccno');
		var dd= document.getElementById('amt');
		var ww= document.getElementById('wamt');
		var transferamount= document.getElementById('tamt');
		var from= document.getElementById('tfrom');
		var to= document.getElementById('tto');
		var amt= document.getElementById('ttamt');
		var accountno= document.getElementById('accno');
		var approownaccountno= document.getElementById('aoaccno');
		var approspenaccountno= document.getElementById('asaccno');
		var limit= document.getElementById('fl');
		var speaccountno= document.getElementById('sa');
		
		 var output = document.getElementById('hashresult');
     		var preoutput = document.getElementById('prehashresult');
		if(web3.isConnected()) {
			console.log("web3 is connected");
		}
		else {
			console.log("web3 is not connected");
		}
		web3.version.getNetwork((err, netId) => {
            switch (netId) {
              case "1":
                console.log('This is mainnet')
                break
              case "2":
                console.log('This is the deprecated Morden test network.')
                break
              case "3":
                console.log('This is the ropsten test network.')
                break
              case "4":
                console.log('This is the Rinkeby test network.')
                break
              case "42":
                console.log('This is the Kovan test network.')
                break
              default:
                console.log('This is an unknown network.')
            }
        });

	 function dep(){
        
        	return bb.totalSupply(dd.value,function(err,res){
                if (!err) {
                    output.innerText = res;
                }
                else{
                  output.innerText = "Error";
                }
              });
            }
	 function wi(){
        
        	return bb.withdraw(ww.value,function(err,res){
                if (!err) {
                    output.innerText = res;
                }
                else{
                  output.innerText = "Error";
                }
              });
            }
        function Transfer(){
        
        	return bb.transfer(transferaccountno.value,transferamount.value,function(err,res){
                if (!err) {
                    output.innerText = res;
                }
                else{
                  output.innerText = "Error";
                }
              });
            }
	 function bal(){
        
        	return bb.balanceOf(accountno.value,function(err,res){
                if (!err) {
                    output.innerText = res;
                }
                else{
                  output.innerText = "Error";
                }
              });
            }
	function From() {
		return bb.transferFrom(from.value,to.value,amt.value,function(err,res){
                if (!err) {
                    output.innerText = res;
                }
                else{
                  output.innerText = "Error";
                }
              });
	}
	 function appro(){
        
        	return bb.approve( speaccountno.value,limit.value,function(err,res){
                if (!err) {
                    output.innerText = res;
                }
                else{
                  output.innerText = "Error";
                }
              });
            }
 function allow(){
        
        	return bb.allowance(approownaccountno.value, approspenaccountno.value,function(err,res){
                if (!err) {
                    output.innerText = res;
                }
                else{
                  output.innerText = "Error";
                }
              });
            }

	</script>
</body>
</html>
